<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Form</title>
  </head>
  <body>
    <!-- This is a static file for Netlify's form detection -->
    <form
      id="roaster-form"
      name="roaster-form"
      method="POST"
      data-netlify="true"
    >
      <!-- Hidden input for the form name, necessary for Netlify to identify the form -->
      <input type="hidden" name="form-name" value="roaster-form" />
      <!-- For Netlify form notification -->
      <input
        type="hidden"
        name="subject"
        value="Coffee Roaster Update from Netlify submission"
      />
      <!-- Hidden field for the honeypot technique -->
      <p>
        <label>
          Don’t fill this out if you’re human: <input name="bot-field" />
        </label>
      </p>
      <div>
        <h2>The Roaster</h2>
        <p>
          Great coffee starts with great beans, from great farms, but the
          roasting process plays a critical role in your cup. Thank you for
          making this resource better for everyone.
        </p>
        <fieldset>
          <label> I'm letting you know about an... </label>
          <!-- Issue checkbox -->
          <div>
            <input id="issue" name="issue" type="checkbox" />
            <label for="issue">Issue</label>
            <p>
              Did I get something wrong? Or maybe the Roaster opened a new cafe?
              Let me know!
            </p>
          </div>
          <!-- Recommendation checkbox -->
          <div>
            <input id="recommendation" name="recommendation" type="checkbox" />
            <label for="recommendation">Recommendation</label>
            <p>
              Got somewhere you can recommend? A new secret Roaster? Share with
              the rest of us!
            </p>
          </div>
        </fieldset>
        <!-- Roaster Name input -->
        <label for="roaster-name">Roaster Name</label>
        <input
          type="text"
          name="roaster-name"
          id="roaster-name"
          placeholder="Coffee Roasting Co"
          required
        />
        <!-- Roaster Website input -->
        <label for="roaster-website">Roaster Website</label>
        <input
          type="url"
          name="roaster-website"
          id="roaster-website"
          placeholder="https://www.coffee.com.au"
          required
        />
        <!-- Roaster State dropdown -->
        <label for="state">Select Roaster State</label>
        <select id="state" name="state">
          <option value="All">All</option>
          <option value="NSW">New South Wales</option>
          <option value="VIC">Victoria</option>
          <option value="QLD">Queensland</option>
          <option value="WA">Western Australia</option>
          <option value="SA">South Australia</option>
          <option value="TAS">Tasmania</option>
          <option value="ACT">Australian Capital Territory</option>
          <option value="NT">Northern Territory</option>
        </select>
        <!-- Form buttons -->
        <button type="button">Cancel</button>
        <button type="submit">Submit</button>
      </div>
    </form>

    <script>
      document
        .getElementById("roaster-form")
        .addEventListener("submit", async function (event) {
          event.preventDefault();

          const form = event.target;
          const formData = new FormData(form);

          try {
            const response = await fetch(form.action, {
              method: "POST",
              body: formData,
              headers: {
                Accept: "application/x-www-form-urlencoded",
              },
            });

            if (response.ok) {
              window.location.href = "/success";
            } else {
              console.error("Form submission failed");
            }
          } catch (error) {
            console.error("Form submission error:", error);
          }
        });
    </script>
  </body>
</html>
